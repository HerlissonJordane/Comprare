unit U_cadastro_compras;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.WinXPanels, Vcl.StdCtrls,
  Vcl.WinXCtrls, Vcl.ExtCtrls, Vcl.WinXCalendars, JvComponentBase, JvBalloonHint,
  JvHint, JvExControls, JvAnimatedImage, JvGIFCtrl, JvExComCtrls, JvAnimate,
  Vcl.ComCtrls, Vcl.BaseImageCollection, Vcl.ImageCollection, JvBmpAnimator,
  System.ImageList, Vcl.ImgList, Vcl.Buttons, JvExStdCtrls, JvGroupBox,
  JvGroupHeader, JvButton, JvControlPanelButton, JvComponentPanel,
  JvExExtCtrls, JvSecretPanel, JvGradientHeaderPanel, JvExtComponent,
  JvItemsPanel, JvDBLookup, Data.DB, Data.Win.ADODB, Vcl.Imaging.pngimage;

type
  TFrm_cadastro_compras = class(TForm)
    CardPanel1: TCardPanel;
    Card1: TCard;
    CalendarPicker_compra: TCalendarPicker;
    JvDBLookupCombo1: TJvDBLookupCombo;
    Label1: TLabel;
    ADOQuery_comercio: TADOQuery;
    DataSource1: TDataSource;
    LabeledEdit1: TLabeledEdit;
    Image1: TImage;
    JvGIFAnimator1: TJvGIFAnimator;
    JvGIFAnimator2: TJvGIFAnimator;
    ButtonedEdit_pesquisa: TButtonedEdit;
    ImageList1: TImageList;
    SpeedButton1: TSpeedButton;
    procedure FormShow(Sender: TObject);
    procedure JvDBLookupCombo1Change(Sender: TObject);
    procedure JvGIFAnimator2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Frm_cadastro_compras: TFrm_cadastro_compras;

implementation

{$R *.dfm}

uses U_principal;


procedure TFrm_cadastro_compras.FormShow(Sender: TObject);
begin
  ADOQuery_comercio.Close;
  ADOQuery_comercio.SQL.Clear;
  ADOQuery_comercio.SQL.Add('SELECT COM.COD_SUP,NOME,CAT.COD_CAT,CATEGORIA '+
                            'FROM COMERCIO AS COM  INNER JOIN CAT_COMERCIO AS CAT '+
                            '    ON COM.COD_CAT = CAT.COD_CAT '+
                            '  ORDER BY NOME');
  ADOQuery_comercio.Open;

  JvDBLookupCombo1.KeyValue:= ADOQuery_comercio.FieldByName('cod_sup').AsInteger;

  JvGIFAnimator2.Top:= (CardPanel1.Height - JvGIFAnimator2.Height)-15;
  JvGIFAnimator2.Left:= (CardPanel1.Width - JvGIFAnimator2.Width)-15;
end;

procedure TFrm_cadastro_compras.JvDBLookupCombo1Change(Sender: TObject);
begin
  LabeledEdit1.Text:= ADOQuery_comercio.FieldByName('categoria').AsString;
end;

procedure TFrm_cadastro_compras.JvGIFAnimator2Click(Sender: TObject);
begin
  Label1.Visible:= False;
  JvDBLookupCombo1.Visible:= False;
  CalendarPicker_compra.Visible:= False;
  CardPanel1.Height:= (ButtonedEdit_pesquisa.Height + 10);
  SpeedButton1.Visible:= False;
  JvGIFAnimator2.Visible:= False;
  JvGIFAnimator1.Visible:= True;
  JvGIFAnimator1.Top:= (CardPanel1.Height - JvGIFAnimator1.Height)-15;
  JvGIFAnimator1.Left:= (CardPanel1.Width - JvGIFAnimator1.Width)-15;
end;

end.
